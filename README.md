node-red-contrib-google-cloud **(ALPHA)**
=====================================

**_This is not an official Google product._**

[Node-RED](http://nodered.org) nodes for [Google Cloud Platform](https://cloud.google.com/).

## Google Cloud Credentials

| Property   | Type     | Description                                          |
| ---------- | -------- | ---------------------------------------------------- |
| **Name**   | `string` | Label for easy idetification, essentially a comment. |
| **Key**    | `string` | Credentials in the form of a JSON key.               |

The credentials for a service account can be acquired from the [API Manager](https://console.cloud.google.com/apis/credentials). After you finish creating a service account key it will be downloaded in a JSON format. Copy and paste the contents of the file directly into the **Key** field.

![Credentials](docs/1.png)

![Create Credentials](docs/2.png)

![Create JSON Credentials](docs/3.png)

## Google Cloud Pub/Sub

### Before You Begin

1. [Select or create a Google Cloud project.](https://console.cloud.google.com/project)
2. [Enable billing for your project.](https://support.google.com/cloud/answer/6293499#enable-billing)
3. [Enable the Pub/Sub API.](https://console.cloud.google.com/flows/enableapi?apiid=pubsub)

### Input

#### Node Properties

| Property         | Type                       | Description                                                            |
| ---------------- | -------------------------- | ---------------------------------------------------------------------- |
| **Credentials**  | `google-cloud-credentials` | See [Google Cloud Credentials](#google-cloud-credentials)              |
| **Topic**        | `string`                   | Name of the topic to subscribe to.                                     |
| **Subscription** | `string`                   | Name of the subscription to create. If null one will be autogenerated. |
| **Deadline**     | `integer`                  | Number of seconds to wait before attempting to redeliver a message.    |
| **Encoding**     | `string`                   | Underlying encoding of the payload. Defaults to 'utf-8'.               |
| **Interval**     | `integer`                  | Number of milliseconds between polling for messages.                   |
| **Timeout**      | `integer`                  | Number of milliseconds before giving up on an HTTP request.            |
| **Name**         | `string`                   | Label for easy identification, essentially a comment.                  |

#### Message Properties

| Property                    | Type          | Description                                                                              |
| --------------------------- | ------------- | ---------------------------------------------------------------------------------------- |
| **payload**                 | `string`      | The payload passed as-is from the PubSub message.                                        |
| **time**                    | `Date|number` | The timestamp converted to the number of milliseconds since 1 January 1970 UTC.          |
| **project**                 | `string`      | The name of Google Cloud Platform project.                                               |
| **topic**                   | `string`      | The name of the topic in Google Cloud Platform.                                          |
| **subscription**            | `string`      | The name of the subscription in Google Cloud Platform.                                   |
| **resource**                | `string`      | The URI of the resource in the form of /projects/*project*/subscriptions/*subscription*. |

### Output

#### Node Properties

| Property        | Type                       | Description                                               |
| --------------- | -------------------------- | --------------------------------------------------------- |
| **Credentials** | `google-cloud-credentials` | See [Google Cloud Credentials](#google-cloud-credentials) |
| **Topic**       | `string`                   | Name of the topic to publish to.                          |
| **Name**        | `string`                   | Label for easy identification, essentially a comment.     |

#### Message Properties

| Property    | Type          | Description                                                                       |
| ----------- | ------------- | --------------------------------------------------------------------------------- |
| **payload** | `string`      | The payload passed as-is to the PubSub message.                                   |
| **time**    | `Date|number` | The timestamp converted from the number of milliseconds since 1 January 1970 UTC. |
